项目优化清单（按模块分组）
安全与访问控制
增加鉴权与权限（JWT/token），为 POST/PUT/DELETE/SSE 等关键接口加保护
接口限流（Flask-Limiter）与请求体大小限制；开启 CORS 白名单与安全头部
统一输入校验（marshmallow/pydantic）与输出结构（code/msg/data）
敏感配置分离至环境变量与密钥管理；移除仓库中的私密文件/路径
API 设计与文档
统一响应模型并在 Swagger 中使用 @marshal_with 显式返回结构与示例响应
为所有路径参数/查询参数补充 @param，Body 用 @expect(validate=True)
接口版本化（/api/v1），建立废弃策略；为分页/筛选参数统一格式与默认值
为 SSE 接口补充断线重连与鉴权说明；对长耗时任务返回异步票据
稳定性与容错
为第三方调用（Google Sheets）补齐超时、重试、熔断与代理失败回退
任务管理器增加进程/线程监管、超时回收、任务幂等与重复提交防抖
增加健康检查与就绪探针（/healthz、/readiness）
性能与资源
数据库连接池与超时设置；热点查询加索引；分页查询只拉必要字段
静态资源缓存与压缩；Gunicorn 多进程多线程配置合理化（CPU×2+1）
可选引入缓存（Redis）加速读取型接口与配置缓存
日志与可观测性
统一日志级别与格式；关键路径加结构化日志（含request_id、task_id）
指标监控（Prometheus/Grafana）：请求耗时、错误率、任务队列深度
日志页面/接口支持更多过滤项、下载、脱敏（避免敏感信息泄露）
配置与环境
划分 env 配置（dev/test/prod），不同 docker-compose 与 .env 文件
完善 Alembic 迁移流程（变更即迁移），CI 执行 migrate --autogenerate 审核
统一配置加载顺序（env > instance > default），删除无效配置项
测试与质量
接口自动化：pytest + Flask test client（覆盖成功/失败/鉴权/参数校验）
E2E 用 Postman/Apifox Collections；接入 CI（GitHub Actions）持续回归
代码风格与预提交：ruff/flake8 + black + isort + pre-commit；类型标注与 mypy（可选）
前端与管理后台
管理台页面的错误态、加载态与空态完善；接口错误回显统一
首页根路径 / 跳转到 /admin/（避免 404 体验）
在 UI 中醒目展示任务状态与SSE连接状态；提供重试/取消/重启的确认对话框
文档与协作
在 /swagger 中补充每个接口的“示例请求+示例响应”；关键模型集中维护
docs 目录结构梳理：概览（api_overview.md）→ 规范（how_to_add_api_docs.md）→ 测试报告（api_test_report.md）
为新增接口建立模板（代码 Snippet + 文档 Snippet），降低维护成本
数据与合规
日志与数据库脱敏策略（邮箱、手机号、Token、Cookie 等）
删除/导出数据的合规流程与审计日志
快速落地建议（优先级由高到低）
1) 接入鉴权与统一响应模型；完善参数校验与限流
2) 为关键接口加 @marshal_with 的响应模型与示例响应；补齐分页/筛选规范
3) 增加测试与 CI；为 Google API/任务管理器补齐超时、重试与幂等
4) 数据库索引与连接池优化；Gunicorn 并发配置与静态缓存
5) 监控/日志结构化与追踪 ID；健康检查与就绪探针
6) 文档与模板标准化，确保新增接口与文档同步输出
